{% extends 'survey/base.html' %}

{% block style %}
{% endblock %}

{% block script %}
{% endblock %}

{% block body %}

<form action="" method="post" role="form"
      class="d-flex flex-column
             border border-danger
             ">
    {% csrf_token %}
    <div class="d-flex">
        <div class="flex-grow-1">
            {% if feed.question.has_instruction %}
                {% if feed.question.instruction_is_html %}
                    {% autoescape off %}
                    {{feed.question.instruction_content}}
                    {% endautoescape %}
                {% else %}
                    {{feed.question.instruction_content}}
                {% endif %}
            {% else %}
                No instructions for this question
            {% endif %}
        </div>
        <div class="form-group h-100">
            <div class="btn-group-vertical btn-group-toggle
                        d-flex align-items-center h-100" data-toggle="buttons">
                {% for k, v in feed.choices %}
                <label class="d-flex flex-row align-items-center flex-grow-1 flex-fill
                              btn btn-primary">
                    <input type="radio" name="sample" id="{{v.id}}" required>
                        <span class="badge mr-4">{{k}}</span>
                        <div class="audio">
                            <audio preload="auto">
                                <source src="{{MEDIA}}{{v.data}}" type="{{v.data_format}}"/>
                                Audio format not supported.
                            </audio>
                            <button type="button" class="btn btn-light play" id="play-{{k}}">
                                <span class="glyphicon glyphicon-play"/>
                            </button>
                        </div>
                    </input>
                </label>
                {% endfor %}
            </div>
        </div>
    </div>
    {% include "survey/flipper.html" %}
</form>
{% endblock %}
